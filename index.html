<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  <title>AR Video on Image</title>
<script src="https://aframe.io/releases/1.2.0/aframe.min.js"></script>
<script src="mindar/dist/mindar-image-aframe.prod.js"></script>

  <style>
    body, html { margin: 0; overflow: hidden; }
    #my-video { display: none; } /* Optional: hide raw video tag */
  </style>
</head>

<body>
  <h1 style="text-align: center;">AR Video on Image Target</h1>
  <a-scene
    mindar-image="imageTargetSrc: marker.mind; autoStart: true;"
    embedded
    vr-mode-ui="enabled: false"
    device-orientation-permission-ui="enabled: true"
    renderer="colorManagement: true, physicallyCorrectLights">
    <script>
  AFRAME.scenes[0].addEventListener("loaded", () => {
    const video = document.querySelector("#my-video");
    video.play().catch(err => console.warn("Video play blocked", err));
  });
</script>


    <a-assets timeout="10000">
      <video id="my-video" src="video.mp4" autoplay muted loop playsinline crossorigin="anonymous"></video>
    </a-assets>

    <a-camera position="0 0 0" look-controls="enabled: false"></a-camera>

    <a-entity mindar-image-target="targetIndex: 0">
      <a-video
        src="#my-video"
        width="1.5"
        height="0.85"
        position="0 0 0">
      </a-video>
    </a-entity>
  </a-scene>

  <!-- Optional: Ensure video plays on user interaction (fallback for stricter browsers) -->
  <script>
    document.body.addEventListener("click", () => {
      const video = document.querySelector("#my-video");
      if (video.paused) video.play();
    });
  </script>
</body>
</html>
